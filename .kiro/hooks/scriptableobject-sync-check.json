{
  "name": "ScriptableObject Sync Check",
  "description": "Validates ScriptableObject script changes and checks asset compatibility",
  "trigger": {
    "type": "onSave",
    "filePattern": "Assets/_Project/Scripts/Data/**/*.cs",
    "excludePattern": "**/Library/**"
  },
  "enabled": true,
  "prompt": "Analyze this ScriptableObject script for potential breaking changes:\n\n1. **Serialization Changes**:\n   - Identify added/removed/renamed serialized fields\n   - Check for type changes on existing fields\n   - Flag changes that will break existing .asset files\n\n2. **Migration Guidance**:\n   - If breaking changes detected, suggest migration steps\n   - Recommend using [FormerlySerializedAs] attribute for renames\n   - Suggest default values for new required fields\n\n3. **Asset Location Check**:\n   - Verify corresponding .asset files exist in:\n     - `Assets/_Project/ScriptableObjects/Resources/` (for resource definitions)\n     - `Assets/_Project/ScriptableObjects/Recipes/` (for recipes)\n     - `Assets/_Project/ScriptableObjects/Machines/` (for machine configs)\n     - `Assets/_Project/ScriptableObjects/Research/` (for tech tree)\n     - `Assets/_Project/ScriptableObjects/Toys/` (for toy definitions)\n\n4. **Best Practices**:\n   - Ensure class has [CreateAssetMenu] attribute with appropriate menu path\n   - Verify class inherits from ScriptableObject\n   - Check for proper use of [Header] and [Tooltip] attributes\n\n5. **Data Integrity**:\n   - Flag potential null reference issues\n   - Identify missing validation in OnValidate() method\n   - Suggest adding range constraints where appropriate\n\nProvide a summary of:\n- Breaking changes (if any)\n- Migration steps needed\n- Asset files that may need regeneration\n- Recommendations for data integrity\n\nIf no issues, respond with 'ScriptableObject changes are safe.'\n\nFile: {{filePath}}\n\n```csharp\n{{fileContent}}\n```",
  "autoApprove": false
}
